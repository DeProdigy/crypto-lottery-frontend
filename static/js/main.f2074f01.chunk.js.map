{"version":3,"sources":["web3.js","lottery.js","App.js","reportWebVitals.js","index.js"],"names":["window","ethereum","request","method","web3","Web3","eth","Contract","App","REQUIRED_ETH","useState","manager","setManager","players","setPlayers","contractBalance","setContractBalance","isProcessing","setIsProcessing","isManager","setIsManager","useEffect","a","lottery","methods","call","fetchManager","getAccounts","fetchAccounts","getPlayers","fetchPlayers","getBalance","options","address","balance","enterLottery","event","preventDefault","accounts","enter","send","from","value","utils","toWei","selectWinner","sendWinningsToWinner","className","length","fromWei","disabled","onClick","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.f2074f01.chunk.js","sourcesContent":["import Web3 from \"web3\";\n\nwindow.ethereum.request({ method: \"eth_requestAccounts\" });\n\nconst web3 = new Web3(window.ethereum);\n\nexport default web3;\n","import web3 from './web3';\n\nconst address = '0xb299fE43a651f8e0764469fe2d05E033a0f35Fe6';\nconst abi = [{\"constant\":true,\"inputs\":[],\"name\":\"manager\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"getPlayers\",\"outputs\":[{\"name\":\"\",\"type\":\"address[]\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[],\"name\":\"enter\",\"outputs\":[],\"payable\":true,\"stateMutability\":\"payable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[],\"name\":\"sendWinningsToWinner\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"}];\n\nexport default new web3.eth.Contract(abi, address);\n","import './App.css';\nimport React, { useState, useEffect } from 'react';\nimport lottery from './lottery';\nimport web3 from './web3';\n\nconst App = () => {\n  const REQUIRED_ETH = '0.01';\n  const [manager, setManager] = useState('');\n  const [players, setPlayers] = useState([]);\n  const [contractBalance, setContractBalance] = useState('');\n  const [isProcessing, setIsProcessing] = useState(false);\n  const [isManager, setIsManager] = useState(false);\n\n  useEffect(() => {\n    const fetchManager = async () => {\n      const manager = await lottery.methods.manager().call();\n      setManager(manager);\n    };\n\n    fetchManager();\n  }, []);\n\n  useEffect(() => {\n    const fetchAccounts = async () => {\n      const accounts = await web3.eth.getAccounts();\n      accounts[0] === manager && setIsManager(true) ;\n    };\n\n    fetchAccounts();\n  }, [manager]);\n\n  useEffect(() => {\n    const fetchPlayers = async () => {\n      const players = await lottery.methods.getPlayers().call();\n      setPlayers(players);\n    };\n\n    fetchPlayers();\n  }, [isProcessing]);\n\n  useEffect(() => {\n    const fetchPlayers = async () => {\n      const balance = await web3.eth.getBalance(lottery.options.address);\n      setContractBalance(balance);\n    };\n\n    fetchPlayers();\n  }, [isProcessing]);\n\n  const enterLottery = async (event) => {\n    event.preventDefault();\n    setIsProcessing(true);\n\n    const accounts = await web3.eth.getAccounts();\n    await lottery.methods.enter().send({\n      from: accounts[0],\n      value: web3.utils.toWei(REQUIRED_ETH, 'ether'),\n    })\n\n    setIsProcessing(false);\n  }\n\n  const selectWinner = async (event) => {\n    event.preventDefault();\n    setIsProcessing(true);\n\n    await lottery.methods.sendWinningsToWinner().send({ from: manager });\n\n    setIsProcessing(false);\n  }\n\n  return (\n    <div className='app'>\n      <h2>Lottery Contract</h2>\n      { isProcessing && <h3>Processing on the chain...</h3> }\n      <div>\n        <p>This contract is managed by { manager }</p>\n        <p>Currently there are { players.length } players</p>\n        <p>Total contract balance is { web3.utils.fromWei(contractBalance, 'ether') } ETH</p>\n      </div>\n      <hr />\n      <h3>Enter the lottery pool with {REQUIRED_ETH} ETH.</h3>\n      <h3>Winners will be picked at random and will receive the entire pool of ETH.</h3>\n      { isProcessing\n        ? <button disabled={ true }>Check Metamask ...</button>\n        : <button onClick={ enterLottery }>Enter the lottery</button>\n      }\n      { isManager &&\n        <div>\n          <hr/>\n          <h3>Pick a winner and send the pool:</h3>\n          <button onClick={ selectWinner }>Select winner</button>\n        </div>\n      }\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}